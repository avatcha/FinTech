<!-- =========================
     questions.html  (IRMAA removed)
     ========================= -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Healthcare Questionnaire</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root { --pad-x:24px; --stroke:#e5e9f2; --card:#fff; --text:#0a0f2c; --brand:#1a73e8; --brand-700:#0f5ad2; --soft:#f7f9ff; --muted:#6b7280; }
    * , *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body { font-family: 'Inter', sans-serif; background: #f7f9fc; color: var(--text); margin: 0; padding-top: 80px; }
    .stk-container { max-width: 1200px; margin: 0 auto; padding: 0 var(--pad-x); }
    .stk-header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(255,255,255,0.9); border-bottom: 1px solid var(--stroke); backdrop-filter: blur(8px); }
    .stk-header-inner { display: flex; align-items: center; justify-content: space-between; min-height: 60px; }
    .stk-brand { color: var(--text); text-decoration: none; font-weight: 800; font-size: 20px; }
    .stk-nav { display: flex; gap: 18px; align-items: center; }
    .stk-nav a { color: inherit; text-decoration: none; font-weight: 600; font-size: 14px; }
    .stk-nav a:hover { text-decoration: underline; }
    .stk-toggle { display: none; border: 0; background: none; font-size: 26px; cursor: pointer; }
    @media (max-width: 820px) {
      .stk-toggle { display: block; }
      .stk-nav { display: none; position: absolute; right: var(--pad-x); top: 60px; background: var(--card); border: 1px solid var(--stroke); border-radius: 12px; box-shadow: 0 8px 24px rgba(2,6,23,.15); padding: 12px; }
      .stk-nav.open { display: block; }
      .stk-nav a { display: block; padding: 8px 10px; }
    }
    .stk-kicker { font-weight: 800; font-size: 12px; letter-spacing: .12em; text-transform: uppercase; color: var(--brand); margin: 10px 0 8px 0; }
    .stk-strip { display: flex; align-items: center; gap: 10px; background: var(--soft); border: 1px solid var(--stroke); border-radius: 12px; padding: 10px 12px; color: var(--muted); font-size: 13px; }
    .stk-strip svg { flex: 0 0 auto; }
    .wizard { background: white; width: 100%; max-width: 600px; margin: 24px auto; padding: 30px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 1px solid #e4e7ed; }
    h1 { margin-top: 0; }
    .step { display: none; }
    .active { display: block; }
    label { display: block; font-weight: 600; margin-bottom: 6px; }
    input, select, button { width: 100%; padding: 12px; margin-bottom: 16px; font-size: 16px; border-radius: 12px; border: 1px solid #d5d9e2; }
    button { background: #1a73e8; color: white; font-weight: 700; cursor: pointer; border: none; }
    button:hover { background: #0f5ad2; }
    .nav-buttons { display: flex; justify-content: space-between; gap: 12px; margin-top: 12px; }
    .small { font-size: 12px; color: var(--muted); }
    .badge { display:inline-block; padding:3px 8px; border-radius:999px; font-size:12px; margin-right:6px; background:#eef2ff; }
    .ok { background:#ecfdf5; color:#166534; }
  </style>
</head>

<body>
  <header class="stk-header">
    <div class="stk-container stk-header-inner">
      <a class="stk-brand" href="index.html">stakxAi</a>
      <button class="stk-toggle">☰</button>
      <nav id="stk-primary-nav" class="stk-nav">
        <a href="retirement.html">Retirement Planning</a>
        <a href="budget/easy.html">Budget Tool</a>
        <a href="questions.html">Healthcare Tool</a>
        <a href="community.html">Community Boards</a>
      </nav>
    </div>
  </header>

  <div class="stk-container" style="margin-top:12px;">
    <div class="stk-kicker">Rack your Stakx.</div>
    <div class="stk-strip">
      <svg width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm1 15h-2v-6h2Zm0-8h-2V7h2Z"/></svg>
      Free forever. No login required. No data is collected by us.
    </div>
  </div>

  <div class="wizard">
    <h1>Healthcare Questionnaire</h1>
    <p class="small">Answers are temporary and not saved.</p>

    <!-- STEP 1 -->
    <div class="step active" id="step1">
      <h2>Step 1: About You</h2>
      <label>Age</label>
      <input id="age" type="number" placeholder="e.g., 45" />
      <label>ZIP Code</label>
      <input id="zip" placeholder="12345" />
      <div id="zipErr" class="small" style="color:red; display:none;"></div>

      <div id="countyWrap" style="display:none;">
        <label>County</label>
        <select id="county"></select>
      </div>

      <div class="nav-buttons">
        <span></span>
        <button id="next1">Next</button>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="step2">
      <h2>Step 2: Coverage Status</h2>
      <label>Current Coverage</label>
      <select id="coverage">
        <option value="none">None</option>
        <option value="employer">Employer</option>
        <option value="medicare">Medicare</option>
        <option value="medicaid">Medicaid</option>
        <option value="cobra">COBRA</option>
      </select>
      <div class="nav-buttons">
        <button onclick="prevStep()">Back</button>
        <button onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="step" id="step3">
      <h2>Step 3: Household Info</h2>
      <label>Household Income</label>
      <input id="income" type="number" placeholder="e.g., 54000" />
      <label>Household Size</label>
      <input id="hhSize" type="number" placeholder="e.g., 2" />
      <div class="nav-buttons">
        <button onclick="prevStep()">Back</button>
        <button onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 4 -->
    <div class="step" id="step4">
      <h2>Step 4: Preferences</h2>
      <label>Preferred Pharmacy</label>
      <select id="pharmacy">
        <option value="preferred">Preferred retail</option>
        <option value="standard">Standard retail</option>
        <option value="mail">Mail order</option>
      </select>
      <label>Use prescription medications?</label>
      <select id="usesDrugs"><option value="no">No</option><option value="yes">Yes</option></select>
      <div class="nav-buttons">
        <button onclick="prevStep()">Back</button>
        <button onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 5 -->
    <div class="step" id="step5">
      <h2>Step 5: Medicare Details (if applicable)</h2>
      <label>Medicare Status</label>
      <select id="medicareStatus">
        <option value="none">Not enrolled</option>
        <option value="A_only">Part A only</option>
        <option value="B_only">Part B only</option>
        <option value="A_and_B">Parts A + B</option>
      </select>
      <label>Preferred Plan Style</label>
      <select id="planStylePref">
        <option value="ma">Medicare Advantage (C)</option>
        <option value="ab_medigap">A+B + Medigap + D</option>
      </select>
      <!-- IRMAA badge REMOVED; only keep helpful eligibility hints -->
      <div id="medicareBadges" style="margin-top:6px;"></div>
      <div class="nav-buttons">
        <button onclick="prevStep()">Back</button>
        <button onclick="nextStep()">Next</button>
      </div>
    </div>

    <!-- STEP 6 -->
    <div class="step" id="step6">
      <h2>Step 6: All Set!</h2>
      <p>See plan suggestions based on your answers.</p>
      <button onclick="goToPlans()">See My Plans</button>
      <div class="nav-buttons">
        <button onclick="prevStep()">Back</button>
        <span></span>
      </div>
    </div>
  </div>

  <script>
    const state = { medicareStatus: 'none' };
    let current = 1;

    // Header toggle
    document.querySelector('.stk-toggle').addEventListener('click',()=>{
      document.querySelector('.stk-nav').classList.toggle('open');
    });

    function showStep(n){
      document.querySelectorAll(".step").forEach(s=>s.classList.remove("active"));
      document.getElementById("step"+n).classList.add("active");
    }
    function nextStep(){ if(current<6) current++; showStep(current);}
    function prevStep(){ if(current>1) current--; showStep(current); }

    // --- ZIP → County lookup (graceful) ---
    function countiesForZip(zip){
      const map={
        "10001":["New York County"],
        "30301":["Fulton County"],
        "60601":["Cook County"],
        "90001":["Los Angeles County"],
        "73301":["Travis County"],
        "80112":["Arapahoe County","Douglas County"] // multi-county demo
      };
      return map[zip]||[];
    }

    document.getElementById('zip').addEventListener('change', ()=>{
      const zip=document.getElementById('zip').value.trim();
      state.zip=zip;
      const err=document.getElementById('zipErr');
      const wrap=document.getElementById('countyWrap');
      const sel=document.getElementById('county');
      if(!/^\d{5}$/.test(zip)){err.textContent='Enter 5-digit ZIP';err.style.display='block';wrap.style.display='none';state.county="";return;}
      err.style.display='none';
      const list=countiesForZip(zip);
      if(list.length===1){sel.innerHTML=`<option>${list[0]}</option>`;wrap.style.display='none';state.county=list[0];return;}
      if(list.length>1){sel.innerHTML=list.map(c=>`<option>${c}</option>`).join('');wrap.style.display='block';sel.onchange=()=>state.county=sel.value;state.county=sel.value;return;}
      wrap.style.display='none';state.county="";
    });

    document.getElementById('next1').addEventListener('click',()=>{
      const zip=document.getElementById('zip').value.trim();
      const age=document.getElementById('age').value.trim();
      if(!/^\d{5}$/.test(zip)){document.getElementById('zipErr').style.display='block';return;}
      if(!age||Number(age)<0||Number(age)>120){alert("Enter valid age");return;}
      state.zip=zip;state.age=age;
      const wrap=document.getElementById('countyWrap');
      if(wrap.style.display!=='none'){state.county=document.getElementById('county').value;}
      current=2;showStep(current);
    });

    // --- Derived logic (IRMAA removed) ---
    function fplLine(hh){const base=15590;return base+(hh-1)*5540;}
    function computeDerived(){
      const hh=Number(state.hhSize||0);
      const inc=Number(state.incomeAnnual||0);
      state.magi=inc;
      const fpl=fplLine(hh);
      state.fplPct = (fpl && inc) ? Math.round((state.magi/fpl)*100) : null;

      state.subsidyEligible = state.fplPct!=null && state.fplPct>=100 && state.fplPct<=600;
      state.medicaidEligible = state.fplPct!=null && state.fplPct<138;

      // Only set LIS (Extra Help) hint for true Medicare contexts; no IRMAA
      const onMedicare = Number(state.age)>=65 && (state.medicareStatus==="A_only"||state.medicareStatus==="B_only"||state.medicareStatus==="A_and_B");
      state.lisEligible = onMedicare && state.fplPct!=null && state.fplPct<=150;

      // Route
      if(Number(state.age)>=65){
        state.route = state.planStylePref==="ab_medigap" ? "AB_Medigap_D" : "MA";
        if(state.medicaidEligible) state.route = "DSNP";
      } else {
        if(state.medicaidEligible) state.route = "medicaid_chip";
        else if(state.subsidyEligible) state.route = "ACA_subsidized";
        else state.route = "ACA_fullpay";
      }
    }

    function renderMedicareBadges(){
      const el=document.getElementById('medicareBadges');
      const onMedicare=Number(state.age)>=65&&(state.medicareStatus==="A_only"||state.medicareStatus==="B_only"||state.medicareStatus==="A_and_B");
      if(!onMedicare){el.innerHTML="";return;}
      computeDerived();
      const badges=[];
      if(state.lisEligible) badges.push(`<span class="badge ok">Extra Help (LIS) likely</span>`);
      if(state.medicaidEligible) badges.push(`<span class="badge ok">Dual-Eligible (D-SNP) likely</span>`);
      el.innerHTML=badges.join('');
    }

    document.getElementById('medicareStatus').addEventListener('change',e=>{
      state.medicareStatus=e.target.value;computeDerived();renderMedicareBadges();
    });
    document.getElementById('planStylePref').addEventListener('change',e=>{
      state.planStylePref=e.target.value;computeDerived();renderMedicareBadges();
    });

    function goToPlans(){
      state.coverage=document.getElementById('coverage').value;
      state.incomeAnnual=document.getElementById('income').value;
      state.hhSize=document.getElementById('hhSize').value;
      state.pharmacy=document.getElementById('pharmacy').value;
      state.usesDrugs=document.getElementById('usesDrugs').value;
      computeDerived();
      const q=new URLSearchParams(state).toString();
      window.location.href="plans.html?"+q;
    }
  </script>
</body>
</html>

<!-- =========================
     plans.html  (IRMAA removed)
     ========================= -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Plan Options</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --pad-x:24px; --stroke:#e5e9f2; --card:#fff; --text:#0a0f2c; --brand:#1a73e8; --muted:#6b7280; --ok:#166534; --warn:#b45309;
    }
    *{ box-sizing:border-box; } body{ margin:0; font-family:'Inter',sans-serif; background:#f7f9fc; color:var(--text); padding-top:80px; }
    .wrap{ max-width:1200px; margin:0 auto; padding:0 var(--pad-x); }
    header{ position:fixed; inset:0 0 auto 0; background:rgba(255,255,255,.9); border-bottom:1px solid var(--stroke); backdrop-filter:blur(8px); z-index:1000; }
    .header-inner{ display:flex; align-items:center; justify-content:space-between; min-height:60px; }
    .brand{ text-decoration:none; color:var(--text); font-weight:800; font-size:20px; }
    .nav{ display:flex; gap:18px; }
    .nav a{ color:inherit; text-decoration:none; font-weight:600; font-size:14px; }
    .nav a:hover{ text-decoration:underline; }

    .card{ background:#fff; border:1px solid var(--stroke); border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.06); padding:18px; }
    .grid{ display:grid; gap:16px; }
    .grid-2{ grid-template-columns: 1fr 1fr; } @media (max-width:900px){ .grid-2{ grid-template-columns:1fr; } }
    h1{ margin:10px 0 4px; } h2{ margin:0 0 8px; font-size:18px; }
    .small{ color:var(--muted); font-size:12px; }
    .badge{ display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700; border:1px solid #c7d2fe; background:#eef2ff; color:#1f2a59; }
    .badge.ok{ background:#ecfdf5; border-color:#bbf7d0; color:var(--ok); }
    .badge.warn{ background:#fff7ed; border-color:#fde68a; color:var(--warn); }
    .kvs{ display:grid; grid-template-columns: 180px 1fr; gap:8px 12px; }
    .pill{ display:inline-block; padding:4px 10px; border:1px solid var(--stroke); border-radius:999px; background:#fff; font-size:13px; margin:2px 6px 2px 0; }
    table{ width:100%; border-collapse:collapse; } th, td{ border-top:1px solid var(--stroke); padding:10px; text-align:left; font-size:14px; }
    .toolbar{ display:flex; gap:10px; flex-wrap:wrap; }
    button{ padding:10px 14px; border-radius:12px; border:1px solid var(--stroke); background:#fff; font-weight:700; cursor:pointer; }
    button.primary{ background:#1a73e8; color:#fff; border: none; }
    .hint{ font-size:12px; color:var(--muted); }
    .divider{ height:1px; background:var(--stroke); margin:12px 0; }
    .sticky-head{ position:sticky; top:80px; background:#fff; z-index:500; border-bottom:1px solid var(--stroke); padding:10px 0; }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:12px; color:#475569; }
  </style>
</head>
<body>
  <header>
    <div class="wrap header-inner">
      <a class="brand" href="index.html">stakxAi</a>
      <nav class="nav">
        <a href="retirement.html">Retirement Planning</a>
        <a href="budget/easy.html">Budget Tool</a>
        <a href="questions.html">Healthcare Tool</a>
        <a href="community.html">Community Boards</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="sticky-head">
      <h1>Your Plan Options</h1>
      <div id="routeBadges" class="toolbar"></div>
      <div class="hint">Educational demo. We don’t save your answers; this page only reads what your browser just sent.</div>
    </div>

    <!-- Summary -->
    <section class="grid grid-2" style="margin-top:12px;">
      <div class="card">
        <h2>Your Inputs</h2>
        <div class="kvs" id="inputsKV"></div>
        <div class="divider"></div>
        <div>
          <strong>Priorities:</strong>
          <div id="prioPills" style="margin-top:6px;"></div>
        </div>
        <div style="margin-top:8px;">
          <strong>Important Services:</strong>
          <div id="servicesPills" style="margin-top:6px;"></div>
        </div>
      </div>

      <div class="card">
        <h2>Care Team & Medications</h2>
        <div><strong>Doctors:</strong> <div id="providersPills" style="margin-top:6px;"></div></div>
        <div style="margin-top:8px;"><strong>Hospitals:</strong> <div id="hospitalsPills" style="margin-top:6px;"></div></div>
        <div style="margin-top:8px;"><strong>Max distance:</strong> <span id="distLabel"></span></div>
        <div style="margin-top:8px;"><strong>Travel:</strong> <span id="travelLabel"></span></div>
        <div class="divider"></div>
        <div><strong>Medications:</strong></div>
        <table id="drugsTable" style="margin-top:6px;">
          <thead><tr><th>Name</th><th>Fills/mo</th></tr></thead>
          <tbody></tbody>
        </table>
        <div class="hint" id="pharmacyHint" style="margin-top:6px;"></div>
      </div>
    </section>

    <!-- Recommendations placeholder -->
    <section class="card" style="margin-top:16px;">
      <h2>Recommended Track & Next Steps</h2>
      <div id="trackBlock" style="margin-top:6px;"></div>
      <div id="badgesBlock" style="margin-top:8px;"></div>
      <div class="divider"></div>
      <div id="todoBlock" class="hint">
        <strong>TODO (coming next):</strong>
        <ul>
          <li>Load real (or mocked) plans for this route.</li>
          <li>Score plans using your priorities (premium vs total cost vs access, etc.).</li>
          <li>Show a comparison grid with ✅/❌ for each plan against your needs.</li>
        </ul>
      </div>
      <div style="margin-top:12px;" class="toolbar">
        <button onclick="history.back()">← Edit my answers</button>
        <a href="questions.html"><button class="primary">Start over</button></a>
      </div>
    </section>

    <!-- Debug (optional) -->
    <section class="card" style="margin-top:16px;">
      <h2>Debug: Raw Params</h2>
      <pre id="rawParams" class="mono"></pre>
    </section>
  </main>

  <script>
    // Parse query
    const params = Object.fromEntries(new URLSearchParams(location.search));
    const parseJSON = (k, def=[]) => { try { return params[k] ? JSON.parse(params[k]) : def; } catch { return def; } };

    // Normalized inputs we might show later (kept here for compatibility)
    const priorities = parseJSON('priorities');
    const services = parseJSON('servicesImportant');
    const providers = parseJSON('providers');
    const hospitals = parseJSON('hospitals');
    const drugs = parseJSON('drugs');
    const age = Number(params.age || 0);
    const route = params.route || '';
    const subsidy = toBool(params.subsidyEligible);
    const medicaid = toBool(params.medicaidEligible);
    const lis = toBool(params.lisEligible); // still helpful; IRMAA removed entirely

    // Badges (IRMAA removed)
    const routeBadges = document.getElementById('routeBadges');
    routeBadges.innerHTML = [
      badgeForRoute(route),
      medicaid ? `<span class="badge ok">Medicaid likely</span>` : '',
      subsidy ? `<span class="badge ok">ACA subsidies likely</span>` : '',
      lis ? `<span class="badge ok">Extra Help (LIS) likely</span>` : ''
    ].filter(Boolean).join(' ');

    // Inputs KV
    const kv = [
      ['ZIP / County', `${escapeHtml(params.zip || '')} • ${escapeHtml(params.county || '')}`],
      ['Age', escapeHtml(params.age || '')],
      ['Household Size', escapeHtml(params.hhSize || '')],
      ['Household Income (yr)', formatMoney(params.incomeAnnual)],
      ['Estimated MAGI', formatMoney(params.magi)],
      ['FPL % (rough)', params.fplPct ? `${escapeHtml(params.fplPct)}%` : '—'],
      ['Coverage Now', labelCoverage(params.coverage)],
    ];
    renderKV('inputsKV', kv);

    // Pills
    renderPills('prioPills', priorities, 'priority');
    renderPills('servicesPills', services, 'service');
    renderPills('providersPills', providers);
    renderPills('hospitalsPills', hospitals);

    document.getElementById('distLabel').textContent = (params.maxDistanceMiles || '—') + ' miles';
    document.getElementById('travelLabel').textContent = (params.travel || 'no') === 'yes' ? 'Yes' : 'No';

    // Drugs table
    const tbody = document.querySelector('#drugsTable tbody');
    if (!drugs.length) {
      document.getElementById('drugsTable').style.display = 'none';
    } else {
      drugs.forEach(d => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${escapeHtml(d.name || '')}</td><td>${Number(d.fillsPerMonth||0)}</td>`;
        tbody.appendChild(tr);
      });
    }
    const pharmTxt = (params.usesDrugs === 'yes')
      ? `Pharmacy: ${labelPharm(params.pharmacy)}`
      : `No current prescriptions`;
    document.getElementById('pharmacyHint').textContent = pharmTxt;

    // Track block
    const trackBlock = document.getElementById('trackBlock');
    trackBlock.innerHTML = routeExplainer(route, age);

    // badgesBlock for quick at-a-glance needs
    document.getElementById('badgesBlock').innerHTML = [
      priorities.length ? `<div><strong>We’ll optimize for:</strong> ${priorities.map(p=>`<span class="badge">${escapeHtml(labelPriority(p))}</span>`).join(' ')}</div>` : '',
      services.length ? `<div style="margin-top:6px;"><strong>Needs to check:</strong> ${services.map(s=>`<span class="badge">${escapeHtml(labelService(s))}</span>`).join(' ')}</div>` : ''
    ].join('');

    // Debug
    document.getElementById('rawParams').textContent = JSON.stringify(params, null, 2);

    // Utilities
    function renderKV(id, rows){
      const el = document.getElementById(id); el.innerHTML='';
      rows.forEach(([k,v])=>{
        const kEl = document.createElement('div'); kEl.className='small'; kEl.textContent=k;
        const vEl = document.createElement('div'); vEl.textContent = v;
        el.appendChild(kEl); el.appendChild(vEl);
      });
    }
    function renderPills(id, items, kind){
      const el = document.getElementById(id); el.innerHTML='';
      if (!items || !items.length){ el.innerHTML = '<span class="small">None</span>'; return; }
      items.forEach(x=>{
        const span = document.createElement('span');
        span.className='pill';
        span.textContent = kind==='priority' ? labelPriority(x) : kind==='service' ? labelService(x) : x;
        el.appendChild(span);
      });
    }
    function badgeForRoute(r){
      switch(r){
        case 'ACA_subsidized': return `<span class="badge ok">ACA (subsidized)</span>`;
        case 'ACA_fullpay': return `<span class="badge">ACA / off-exchange</span>`;
        case 'medicaid_chip': return `<span class="badge ok">Medicaid/CHIP track</span>`;
        case 'MA': return `<span class="badge ok">Medicare Advantage (Part C)</span>`;
        case 'AB_Medigap_D': return `<span class="badge ok">Original Medicare (A+B) + Medigap + D</span>`;
        case 'DSNP': return `<span class="badge ok">Dual-Eligible (D-SNP)</span>`;
        default: return `<span class="badge">Route pending</span>`;
      }
    }
    function routeExplainer(r, age){
      if (age >= 65){
        if (r === 'MA') return `✅ <strong>Medicare Advantage</strong> (Part C) — bundled benefits (often dental/vision/hearing), networks apply, MOOP caps.`;
        if (r === 'AB_Medigap_D') return `✅ <strong>Original Medicare + Medigap + Part D</strong> — broad/national access, more predictable costs; separate drug plan.`;
        if (r === 'DSNP') return `✅ <strong>Dual-Eligible SNP</strong> — coordinates Medicare & Medicaid for eligible members.`;
        return `We’ll sort between Medicare Advantage and A+B+Medigap+D based on your preferences.`;
      } else {
        if (r === 'medicaid_chip') return `✅ <strong>Medicaid/CHIP likely</strong> based on your MAGI/FPL; verify eligibility with your state.`;
        if (r === 'ACA_subsidized') return `✅ <strong>ACA with subsidies</strong> — we’ll show marketplace plans and apply estimated APTC/CSR.`;
        if (r === 'ACA_fullpay') return `✅ <strong>ACA full-pay</strong> — we’ll show marketplace and off-exchange options.`;
        return `We’ll determine ACA/Medicaid/off-exchange based on MAGI and household.`;
      }
    }
    function labelCoverage(v){
      return ({
        none:'None', employer:'Employer', cobra:'COBRA',
        medicare:'Medicare', medicaid:'Medicaid', va_tricare:'VA/TRICARE', other:'Other'
      })[v] || '—';
    }
    function labelPriority(p){
      const map = {
        lowest_premium:'Lowest premium',
        lowest_total_cost:'Lowest total cost',
        low_deductible:'Low deductible',
        keep_doctors:'Keep my doctors',
        drug_costs:'Drug costs',
        dental_vision_hearing:'Dental/Vision/Hearing',
        network_flex_ppo:'Network flexibility (PPO/OON)',
        simplicity_hmo:'Simplicity (HMO)',
        chronic_condition_support:'Chronic condition support',
        pt_ot_chiro:'PT/OT/Chiropractic',
        mental_health:'Mental health',
        travel_coverage:'Travel coverage',
        predictable_costs:'Predictable costs'
      };
      return map[p] || p;
    }
    function labelService(s){
      const map = {
        physical_therapy:'Physical therapy',
        occupational_therapy:'Occupational therapy',
        chiropractic:'Chiropractic',
        mental_health:'Mental health therapy',
        specialists_no_referral:'Specialists without referrals',
        out_of_network_option:'Out-of-network option',
        virtual_care:'Virtual care',
        urgent_care:'Urgent care'
      };
      return map[s] || s;
    }
    function labelPharm(v){ return ({preferred:'Preferred retail', standard:'Standard retail', mail:'Mail order'})[v] || v; }
    function toBool(v){ return String(v)==='true' || String(v)==='1' || v===true; }
    function escapeHtml(s){ return (s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[c])); }
    function formatMoney(x){ if (x==null || x==='') return '—'; const n=Number(x); if (!isFinite(n)) return '—'; return n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0}); }
  </script>
</body>
</html>
