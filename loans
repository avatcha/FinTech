<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>True Cost of Loans - StakxAI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
:root {
  --bg: #f7f9fc;
  --card: #fff;
  --text: #0a0f2c;
  --muted: #6b7280;
  --stroke: #e2e8f0;
  --brand: #667eea;
  --brand-dark: #5568d3;
  --success: #10b981;
  --warning: #f59e0b;
  --danger: #ef4444;
}

* { box-sizing: border-box; }
body {
  font-family: 'Inter', sans-serif;
  margin: 0;
  background: var(--bg);
  color: var(--text);
  padding-top: 64px;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 20px 50px;
}

/* Header */
.site-header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 1000;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.header-inner {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 20px;
  min-height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.brand {
  color: white;
  text-decoration: none;
  font-weight: 800;
  font-size: 20px;
}

.nav {
  display: flex;
  gap: 18px;
}

.nav a {
  color: white;
  text-decoration: none;
  font-weight: 600;
  font-size: 14px;
}

.nav a:hover {
  opacity: 0.8;
}

.privacy-strip {
  background: rgba(102,126,234,0.1);
  padding: 0.75rem 1rem;
  border-radius: 20px;
  font-size: 0.85rem;
  text-align: center;
  margin: 16px 0 24px;
  color: var(--muted);
}

/* Form */
.card {
  background: var(--card);
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.07);
  margin-bottom: 20px;
  border: 1px solid var(--stroke);
}

h1 {
  font-size: 32px;
  font-weight: 800;
  margin: 20px 0 8px;
}

.subtitle {
  color: var(--muted);
  margin-bottom: 24px;
}

.form-group {
  margin-bottom: 20px;
}

label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
  font-size: 14px;
}

select, input[type="number"] {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  font-size: 16px;
  font-family: inherit;
}

select:focus, input:focus {
  outline: none;
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
}

.btn-primary {
  background: var(--brand);
  color: white;
  border: none;
  padding: 14px 24px;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  width: 100%;
  transition: background 0.2s;
}

.btn-primary:hover {
  background: var(--brand-dark);
}

/* Results */
#results {
  display: none;
}

.big-number {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 32px;
  border-radius: 16px;
  text-align: center;
  margin-bottom: 24px;
}

.big-number h2 {
  font-size: 48px;
  margin: 0 0 8px;
  font-weight: 800;
}

.big-number p {
  margin: 4px 0;
  opacity: 0.9;
  font-size: 18px;
}

.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.summary-item {
  text-align: center;
  padding: 16px;
  background: var(--card);
  border-radius: 12px;
  border: 1px solid var(--stroke);
}

.summary-item label {
  font-size: 12px;
  text-transform: uppercase;
  color: var(--muted);
  font-weight: 600;
}

.summary-item .value {
  font-size: 24px;
  font-weight: 700;
  color: var(--text);
  margin-top: 4px;
}

canvas {
  max-height: 400px;
}

/* Strategies */
.strategy-selector {
  margin: 24px 0;
}

.strategy-options {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 12px;
  margin-top: 12px;
}

.strategy-btn {
  padding: 16px;
  background: white;
  border: 2px solid var(--stroke);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.strategy-btn:hover {
  border-color: var(--brand);
  background: rgba(102,126,234,0.05);
}

.strategy-btn.active {
  border-color: var(--brand);
  background: rgba(102,126,234,0.1);
}

.strategy-btn strong {
  display: block;
  margin-bottom: 4px;
  color: var(--text);
}

.strategy-btn small {
  color: var(--muted);
  font-size: 13px;
}

.strategy-controls {
  display: none;
  margin-top: 16px;
  padding: 20px;
  background: rgba(102,126,234,0.05);
  border-radius: 12px;
}

.strategy-controls.active {
  display: block;
}

.slider-container {
  margin: 16px 0;
}

.slider-container input[type="range"] {
  width: 100%;
}

.slider-value {
  text-align: center;
  font-size: 24px;
  font-weight: 700;
  color: var(--brand);
  margin: 8px 0;
}

.comparison {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-top: 20px;
}

.comparison-side {
  padding: 16px;
  border-radius: 12px;
}

.comparison-side.current {
  background: #f3f4f6;
}

.comparison-side.new {
  background: rgba(16,185,129,0.1);
  border: 2px solid var(--success);
}

.comparison-side h4 {
  margin: 0 0 12px;
  font-size: 14px;
  text-transform: uppercase;
  color: var(--muted);
}

.comparison-side .stat {
  margin: 8px 0;
}

.savings-highlight {
  background: var(--success);
  color: white;
  padding: 16px;
  border-radius: 12px;
  text-align: center;
  margin-top: 16px;
  font-weight: 700;
}

@media (max-width: 768px) {
  .comparison {
    grid-template-columns: 1fr;
  }
  .big-number h2 {
    font-size: 36px;
  }
}
</style>
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <a class="brand" href="index.html">StakxAI</a>
    <nav class="nav">
      <a href="index.html#tools">Tools</a>
      <a href="index.html#coming-soon">Coming Soon</a>
      <a href="feedback.html">Feedback</a>
    </nav>
  </div>
</header>

<div class="container">
  <div class="privacy-strip">
    üîí 100% Private ‚Ä¢ No Login Required ‚Ä¢ No Data Collected
  </div>

  <h1>True Cost of Loans</h1>
  <p class="subtitle">Understand what you'll really pay and discover ways to save thousands in interest.</p>

  <div class="card">
    <div class="form-group">
      <label>What are you borrowing for?</label>
      <select id="loanCategory">
        <option value="">Select...</option>
        <option value="vehicle">üöó Vehicle</option>
        <option value="home">üè† Home/Property</option>
        <option value="credit">üí≥ Credit Card</option>
        <option value="education">üéì Education</option>
        <option value="business">üíº Business</option>
        <option value="personal">üí∞ Personal/Other</option>
      </select>
    </div>

    <div class="form-group" id="loanTypeGroup" style="display:none;">
      <label>What type of loan?</label>
      <select id="loanType"></select>
    </div>

    <div id="loanInputs" style="display:none;">
      <div class="form-group">
        <label>Loan Amount ($)</label>
        <input type="number" id="loanAmount" placeholder="20000" value="20000">
      </div>

      <div class="form-group">
        <label>Interest Rate (APR %)</label>
        <input type="number" id="interestRate" step="0.1" placeholder="5.0" value="5.0">
      </div>

      <div class="form-group">
        <label>Loan Term (years)</label>
        <input type="number" id="loanTerm" placeholder="5" value="5">
      </div>

      <button class="btn-primary" onclick="calculate()">Calculate True Cost</button>
    </div>
  </div>

  <div id="results">
    <div class="big-number">
      <h2 id="totalCost">$0</h2>
      <p>Total you'll pay for a <span id="principalDisplay">$0</span> loan</p>
    </div>

    <div class="summary-grid">
      <div class="summary-item">
        <label>Principal</label>
        <div class="value" id="principalValue">$0</div>
      </div>
      <div class="summary-item">
        <label>Total Interest</label>
        <div class="value" style="color: var(--danger);" id="interestValue">$0</div>
      </div>
      <div class="summary-item">
        <label>Monthly Payment</label>
        <div class="value" id="monthlyPayment">$0</div>
      </div>
      <div class="summary-item">
        <label>Time to Pay Off</label>
        <div class="value" id="payoffTime">0 years</div>
      </div>
    </div>

    <div class="card">
      <h3>Payment Breakdown Over Time</h3>
      <canvas id="paymentChart"></canvas>
    </div>

    <div class="card">
      <h3>üí° Strategies to Save Money</h3>
      <p class="subtitle">See how different approaches can save you thousands</p>

      <div class="strategy-options">
        <div class="strategy-btn" onclick="selectStrategy('extra')">
          <strong>Pay Extra Monthly</strong>
          <small>Add to your payment</small>
        </div>
        <div class="strategy-btn" onclick="selectStrategy('biweekly')">
          <strong>Pay Bi-Weekly</strong>
          <small>26 payments/year</small>
        </div>
        <div class="strategy-btn" onclick="selectStrategy('extraPayment')">
          <strong>Extra Payment/Year</strong>
          <small>13 payments total</small>
        </div>
        <div class="strategy-btn" onclick="selectStrategy('lumpsum')">
          <strong>One-Time Payment</strong>
          <small>Bonus or windfall</small>
        </div>
      </div>

      <div id="extraStrategy" class="strategy-controls">
        <h4>Pay Extra Each Month</h4>
        <div class="slider-container">
          <label>Extra amount per month:</label>
          <input type="range" id="extraSlider" min="0" max="500" value="100" step="10" oninput="updateExtraStrategy()">
          <div class="slider-value">$<span id="extraAmount">100</span></div>
        </div>
        <div id="extraComparison"></div>
      </div>

      <div id="biweeklyStrategy" class="strategy-controls">
        <h4>Pay Bi-Weekly Instead of Monthly</h4>
        <p>Pay half your monthly payment every two weeks. You'll make 26 payments per year (equivalent to 13 monthly payments).</p>
        <div id="biweeklyComparison"></div>
      </div>

      <div id="extraPaymentStrategy" class="strategy-controls">
        <h4>Make One Extra Payment Per Year</h4>
        <p>Make 13 payments instead of 12. The extra payment goes entirely toward principal.</p>
        <div id="extraPaymentComparison"></div>
      </div>

      <div id="lumpsumStrategy" class="strategy-controls">
        <h4>Make a One-Time Lump Sum Payment</h4>
        <div class="slider-container">
          <label>Lump sum amount:</label>
          <input type="range" id="lumpsumSlider" min="0" max="10000" value="5000" step="100" oninput="updateLumpsumStrategy()">
          <div class="slider-value">$<span id="lumpsumAmount">5000</span></div>
        </div>
        <div class="slider-container">
          <label>Make payment in year:</label>
          <input type="range" id="lumpsumYearSlider" min="1" max="10" value="1" oninput="updateLumpsumStrategy()">
          <div class="slider-value">Year <span id="lumpsumYear">1</span></div>
        </div>
        <div id="lumpsumComparison"></div>
      </div>
    </div>
  </div>
</div>

<script>
const loanTypes = {
  vehicle: [
    { value: 'auto-traditional', label: 'Traditional Auto Loan (bank/credit union)', type: 'amortizing' },
    { value: 'auto-dealer', label: 'Dealership Financing', type: 'amortizing' },
    { value: 'auto-bhph', label: 'Buy-Here-Pay-Here Dealership ‚ö†Ô∏è', type: 'addon' },
    { value: 'title', label: 'Title Loan ‚ö†Ô∏è', type: 'simple' }
  ],
  home: [
    { value: 'mortgage-fixed', label: 'Fixed-Rate Mortgage (15 or 30 year)', type: 'amortizing' },
    { value: 'mortgage-arm', label: 'Adjustable-Rate Mortgage (ARM)', type: 'amortizing' },
    { value: 'home-equity', label: 'Home Equity Loan', type: 'amortizing' },
    { value: 'heloc', label: 'Home Equity Line of Credit (HELOC)', type: 'revolving' }
  ],
  credit: [
    { value: 'cc-full', label: 'Pay full balance monthly (no interest)', type: 'none' },
    { value: 'cc-fixed', label: 'Fixed monthly payment', type: 'revolving' },
    { value: 'cc-minimum', label: 'Minimum payment only ‚ö†Ô∏è', type: 'revolving' }
  ],
  education: [
    { value: 'federal-student', label: 'Federal Student Loan', type: 'amortizing' },
    { value: 'private-student', label: 'Private Student Loan', type: 'amortizing' }
  ],
  business: [
    { value: 'sba', label: 'SBA Loan', type: 'amortizing' },
    { value: 'business-term', label: 'Traditional Business Term Loan', type: 'amortizing' },
    { value: 'business-loc', label: 'Business Line of Credit', type: 'revolving' },
    { value: 'equipment', label: 'Equipment Financing', type: 'amortizing' },
    { value: 'mca', label: 'Merchant Cash Advance ‚ö†Ô∏è', type: 'factor' },
    { value: 'short-term', label: 'Short-Term Business Loan', type: 'discount' }
  ],
  personal: [
    { value: 'personal', label: 'Personal Loan (bank/credit union)', type: 'amortizing' },
    { value: 'payday', label: 'Payday Loan ‚ö†Ô∏è', type: 'simple' },
    { value: 'installment', label: 'Installment Loan', type: 'amortizing' },
    { value: 'furniture', label: 'Furniture/Appliance Financing', type: 'addon' }
  ]
};

let currentLoanData = {};
let paymentChart = null;

document.getElementById('loanCategory').addEventListener('change', function() {
  const category = this.value;
  const typeGroup = document.getElementById('loanTypeGroup');
  const typeSelect = document.getElementById('loanType');
  const inputs = document.getElementById('loanInputs');
  
  if (category) {
    typeSelect.innerHTML = '<option value="">Select...</option>';
    loanTypes[category].forEach(type => {
      const option = document.createElement('option');
      option.value = type.value;
      option.textContent = type.label;
      option.dataset.calcType = type.type;
      typeSelect.appendChild(option);
    });
    typeGroup.style.display = 'block';
  } else {
    typeGroup.style.display = 'none';
    inputs.style.display = 'none';
  }
});

document.getElementById('loanType').addEventListener('change', function() {
  const inputs = document.getElementById('loanInputs');
  inputs.style.display = this.value ? 'block' : 'none';
});

function calculate() {
  const amount = parseFloat(document.getElementById('loanAmount').value);
  const rate = parseFloat(document.getElementById('interestRate').value) / 100 / 12;
  const years = parseFloat(document.getElementById('loanTerm').value);
  const months = years * 12;

  if (!amount || !rate || !years) return;

  const monthlyPayment = (amount * rate * Math.pow(1 + rate, months)) / (Math.pow(1 + rate, months) - 1);
  const totalPaid = monthlyPayment * months;
  const totalInterest = totalPaid - amount;

  currentLoanData = {
    principal: amount,
    rate: rate,
    months: months,
    years: years,
    monthlyPayment: monthlyPayment,
    totalPaid: totalPaid,
    totalInterest: totalInterest
  };

  document.getElementById('totalCost').textContent = '$' + totalPaid.toLocaleString('en-US', {maximumFractionDigits: 0});
  document.getElementById('principalDisplay').textContent = '$' + amount.toLocaleString('en-US', {maximumFractionDigits: 0});
  document.getElementById('principalValue').textContent = '$' + amount.toLocaleString('en-US', {maximumFractionDigits: 0});
  document.getElementById('interestValue').textContent = '$' + totalInterest.toLocaleString('en-US', {maximumFractionDigits: 0});
  document.getElementById('monthlyPayment').textContent = '$' + monthlyPayment.toLocaleString('en-US', {maximumFractionDigits: 0});
  document.getElementById('payoffTime').textContent = years + ' years';

  document.getElementById('results').style.display = 'block';
  
  createPaymentChart();
}

function createPaymentChart() {
  const { principal, rate, months } = currentLoanData;
  
  let balance = principal;
  const principalData = [];
  const interestData = [];
  const labels = [];

  for (let month = 1; month <= months; month++) {
    const interestPayment = balance * rate;
    const principalPayment = currentLoanData.monthlyPayment - interestPayment;
    balance -= principalPayment;

    if (month % 12 === 0 || month === 1) {
      labels.push('Year ' + Math.ceil(month / 12));
      principalData.push(principalPayment);
      interestData.push(interestPayment);
    }
  }

  const ctx = document.getElementById('paymentChart').getContext('2d');
  
  if (paymentChart) {
    paymentChart.destroy();
  }

  paymentChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Interest Payment',
          data: interestData,
          backgroundColor: 'rgba(239, 68, 68, 0.5)',
          borderColor: 'rgba(239, 68, 68, 1)',
          borderWidth: 2,
          fill: true
        },
        {
          label: 'Principal Payment',
          data: principalData,
          backgroundColor: 'rgba(16, 185, 129, 0.5)',
          borderColor: 'rgba(16, 185, 129, 1)',
          borderWidth: 2,
          fill: true
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          position: 'top'
        },
        tooltip: {
          mode: 'index',
          intersect: false,
          callbacks: {
            label: function(context) {
              return context.dataset.label + ': $' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 0});
            }
          }
        }
      },
      scales: {
        x: {
          stacked: false
        },
        y: {
          stacked: false,
          ticks: {
            callback: function(value) {
              return '$' + value.toLocaleString('en-US', {maximumFractionDigits: 0});
            }
          }
        }
      }
    }
  });
}

function selectStrategy(strategy) {
  document.querySelectorAll('.strategy-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.strategy-controls').forEach(ctrl => ctrl.classList.remove('active'));
  
  event.target.closest('.strategy-btn').classList.add('active');
  document.getElementById(strategy + 'Strategy').classList.add('active');
  
  if (strategy === 'extra') updateExtraStrategy();
  if (strategy === 'biweekly') updateBiweeklyStrategy();
  if (strategy === 'extraPayment') updateExtraPaymentStrategy();
  if (strategy === 'lumpsum') updateLumpsumStrategy();
}

function updateExtraStrategy() {
  const extra = parseFloat(document.getElementById('extraSlider').value);
  document.getElementById('extraAmount').textContent = extra;
  
  const newPayment = currentLoanData.monthlyPayment + extra;
  const result = calculateNewLoan(currentLoanData.principal, currentLoanData.rate, newPayment);
  
  showComparison('extraComparison', result, 'Extra $' + extra + '/month');
}

function updateBiweeklyStrategy() {
  const biweeklyPayment = currentLoanData.monthlyPayment / 2;
  const effectiveMonthlyExtra = currentLoanData.monthlyPayment / 12;
  const newMonthlyPayment = currentLoanData.monthlyPayment + effectiveMonthlyExtra;
  
  const result = calculateNewLoan(currentLoanData.principal, currentLoanData.rate, newMonthlyPayment);
  
  showComparison('biweeklyComparison', result, 'Bi-weekly payments');
}

function updateExtraPaymentStrategy() {
  const extraAnnual = currentLoanData.monthlyPayment;
  const extraMonthly = extraAnnual / 12;
  const newMonthlyPayment = currentLoanData.monthlyPayment + extraMonthly;
  
  const result = calculateNewLoan(currentLoanData.principal, currentLoanData.rate, newMonthlyPayment);
  
  showComparison('extraPaymentComparison', result, 'One extra payment/year');
}

function updateLumpsumStrategy() {
  const lumpsum = parseFloat(document.getElementById('lumpsumSlider').value);
  const year = parseInt(document.getElementById('lumpsumYearSlider').value);
  
  document.getElementById('lumpsumAmount').textContent = lumpsum.toLocaleString();
  document.getElementById('lumpsumYear').textContent = year;
  
  const result = calculateLumpsumLoan(currentLoanData.principal, currentLoanData.rate, currentLoanData.monthlyPayment, lumpsum, year);
  
  showComparison('lumpsumComparison', result, '$' + lumpsum.toLocaleString() + ' in Year ' + year);
}

function calculateNewLoan(principal, monthlyRate, newPayment) {
  let balance = principal;
  let months = 0;
  let totalInterest = 0;
  
  while (balance > 0 && months < 600) {
    const interest = balance * monthlyRate;
    const principalPmt = Math.min(newPayment - interest, balance);
    totalInterest += interest;
    balance -= principalPmt;
    months++;
  }
  
  return {
    months: months,
    years: (months / 12).toFixed(1),
    totalInterest: totalInterest,
    totalPaid: principal + totalInterest
  };
}

function calculateLumpsumLoan(principal, monthlyRate, payment, lumpsum, year) {
  let balance = principal;
  let months = 0;
  let totalInterest = 0;
  const lumpsumMonth = year * 12;
  
  while (balance > 0 && months < 600) {
    months++;
    
    if (months === lumpsumMonth) {
      balance -= lumpsum;
      if (balance <= 0) break;
    }
    
    const interest = balance * monthlyRate;
    const principalPmt = Math.min(payment - interest, balance);
    totalInterest += interest;
    balance -= principalPmt;
  }
  
  return {
    months: months,
    years: (months / 12).toFixed(1),
    totalInterest: totalInterest,
    totalPaid: principal + totalInterest
  };
}

function showComparison(elementId, newData, strategyName) {
  const savings = currentLoanData.totalInterest - newData.totalInterest;
  const timeSaved = currentLoanData.years - parseFloat(newData.years);
  
  const html = `
    <div class="comparison">
      <div class="comparison-side current">
        <h4>Current Plan</h4>
        <div class="stat">Payoff: ${currentLoanData.years} years</div>
        <div class="stat">Interest: $${currentLoanData.totalInterest.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
        <div class="stat">Total: $${currentLoanData.totalPaid.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
      </div>
      <div class="comparison-side new">
        <h4>With ${strategyName}</h4>
        <div class="stat">Payoff: ${newData.years} years</div>
        <div class="stat">Interest: $${newData.totalInterest.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
        <div class="stat">Total: $${newData.totalPaid.toLocaleString('en-US', {maximumFractionDigits: 0})}</div>
      </div>
    </div>
    <div class="savings-highlight">
      üí∞ Save $${savings.toLocaleString('en-US', {maximumFractionDigits: 0})} in interest ‚Ä¢ Pay off ${timeSaved.toFixed(1)} years earlier
    </div>
  `;
  
  document.getElementById(elementId).innerHTML = html;
}
</script>

</body>
</html>
